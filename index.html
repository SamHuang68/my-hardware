<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sam Huang's Hardware Registry</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #121212; color: #eee; margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: auto; }
        .section-title { border-bottom: 2px solid #333; padding-bottom: 10px; margin-top: 40px; color: #fff; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .card { background: #1e1e1e; border-radius: 8px; padding: 20px; transition: transform 0.2s; box-shadow: 0 4px 6px rgba(0,0,0,0.3); border: 1px solid #2a2a2a; }
        .card:hover { transform: translateY(-5px); border-color: #555; }
        .card img { width: 100%; border-radius: 4px; height: auto; margin-bottom: 15px; object-fit: cover; }
        .tag { display: inline-block; background: #333; color: #aaa; padding: 4px 8px; border-radius: 4px; font-size: 0.8em; margin-bottom: 10px; }
        h3 { margin-top: 0; color: #e0e0e0; }
        p { margin: 6px 0; font-size: 0.9em; color: #ccc; line-height: 1.4; }
        .spec-label { color: #888; font-weight: bold; margin-right: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sam Huang's Hardware Registry</h1>
        <p style="color: #888;">Last Updated: <span id="last-updated"></span></p>

        <h2 class="section-title">COMPUTING SYSTEMS</h2>
        <div class="grid" id="systems-grid"></div>

        <h2 class="section-title">VISUAL ASSETS</h2>
        <div class="grid" id="displays-grid"></div>

        <h2 class="section-title">PERIPHERALS & AUDIO</h2>
        <div class="grid" id="peripherals-grid"></div>

        <h2 class="section-title">POWER ASSETS</h2>
        <div class="grid" id="power-grid"></div>
    </div>

    <script>
        fetch('data.json')
            .then(res => res.json())
            .then(data => {
                document.getElementById('last-updated').textContent = data?.last_updated || 'Unknown';

                // Render Computing Systems
                const sysGrid = document.getElementById('systems-grid');
                data?.hardware_registry?.forEach(sys => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    
                    let gpuText = 'N/A';
                    if (sys?.gpu) {
                        gpuText = typeof sys.gpu === 'string' ? sys.gpu : (sys.gpu.external || sys.gpu.internal || 'N/A');
                    }

                    card.innerHTML = `
                        <img src="${sys?.image_path || 'images/default.png'}" alt="${sys?.name || 'Device'}" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'300\\' height=\\'200\\'><rect width=\\'100%\\' height=\\'100%\\' fill=\\'%23222\\'/><text x=\\'50%\\' y=\\'50%\\' fill=\\'%23666\\' dominant-baseline=\\'middle\\' text-anchor=\\'middle\\' font-family=\\'sans-serif\\'>No Image</text></svg>'">
                        <span class="tag">${sys?.form_factor || 'Unknown Form Factor'}</span>
                        <h3>${sys?.name || 'Unknown Device'}</h3>
                        ${sys?.cpu?.model ? `<p><span class="spec-label">CPU:</span> ${sys.cpu.model}</p>` : ''}
                        ${sys?.ram?.capacity ? `<p><span class="spec-label">RAM:</span> ${sys.ram.capacity} ${sys.ram.spec ? `(${sys.ram.spec})` : ''}</p>` : ''}
                        ${gpuText !== 'N/A' ? `<p><span class="spec-label">GPU:</span> ${gpuText}</p>` : ''}
                        ${sys?.storage?.primary ? `<p><span class="spec-label">Storage:</span> ${sys.storage.primary}</p>` : ''}
                        ${sys?.upgrade_notes ? `<p><span class="spec-label">Notes:</span> ${sys.upgrade_notes}</p>` : ''}
                    `;
                    sysGrid.appendChild(card);
                });

                // Render Displays
                const dispGrid = document.getElementById('displays-grid');
                data?.display_assets?.forEach(disp => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <span class="tag">Monitor / TV</span>
                        <h3>${disp?.name || 'Unknown Display'}</h3>
                        ${disp?.panel ? `<p><span class="spec-label">Panel:</span> ${disp.panel}</p>` : ''}
                    `;
                    dispGrid.appendChild(card);
                });

                // Render Peripherals & Audio
                const periphGrid = document.getElementById('peripherals-grid');
                data?.peripherals?.forEach(p => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <span class="tag">${p?.category || 'Accessory'}</span>
                        <h3>${p?.name || 'Unknown Peripheral'}</h3>
                    `;
                    periphGrid.appendChild(card);
                });

                // Render Power Assets
                const powerGrid = document.getElementById('power-grid');
                data?.power_assets?.forEach(p => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.innerHTML = `
                        <span class="tag">${p?.category || 'Power'}</span>
                        <h3>${p?.name || 'Unknown Power Device'}</h3>
                    `;
                    powerGrid.appendChild(card);
                });
            })
            .catch(err => {
                console.error('Error loading data:', err);
                document.getElementById('systems-grid').innerHTML = '<p style="color: #ff5555;">Failed to load data.json. Please ensure it is in the same directory.</p>';
            });
    </script>
</body>
</html>
